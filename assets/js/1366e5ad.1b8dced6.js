"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[262],{5763(e,a,n){n.r(a),n.d(a,{assets:()=>o,contentTitle:()=>l,default:()=>p,frontMatter:()=>s,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"Preview/Examples/Laravel","title":"Laravel","description":"Here is a sample code to render the content of the block inside Laravel. Every page component is rendered with a view named after the identifier with passing the data as variables with an additional fields variable containing all the fields.","source":"@site/docs/Preview/Examples/Laravel.md","sourceDirName":"Preview/Examples","slug":"/Preview/Examples/Laravel","permalink":"/visual-editor/docs/Preview/Examples/Laravel","draft":false,"unlisted":false,"editUrl":"https://github.com/ciklik/visual-editor/tree/main/docs/docs/Preview/Examples/Laravel.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Responsive","permalink":"/visual-editor/docs/Preview/preview-responsive"},"next":{"title":"Translation","permalink":"/visual-editor/docs/translation"}}');var t=n(6106),i=n(9236);const s={},l="Laravel",o={},c=[];function d(e){const a={code:"code",h1:"h1",header:"header",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.header,{children:(0,t.jsx)(a.h1,{id:"laravel",children:"Laravel"})}),"\n",(0,t.jsxs)(a.p,{children:["Here is a sample code to render the content of the block inside Laravel. Every page component is rendered with a view named after the identifier with passing the data as variables with an additional ",(0,t.jsx)(a.code,{children:"fields"})," variable containing all the fields."]}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-php",children:"class BlockRenderer\n{\n\n    /* \n    *  Interceptors acts as middlewares\n    *  and can transform the data with\n    *  the inject(string $blocName, array $data) method\n    */ \n    private static $interceptors = [\n        'my-block' => MyBlockInterceptor::class,\n    ];\n\n    public static function render($blocs): string\n    {\n        if (is_string($blocs)) {\n            $blocs = json_decode($blocs, true);\n        }\n        return collect($blocs)->map(function ($bloc) {\n            return self::renderBlock($bloc);\n        })->join('');\n    }\n\n    private static function renderBlock(array $data): string\n    {\n        $request = request();\n        $blocName = $data['_name'];\n        $data['isPreview'] = false;\n        if (isset(self::$interceptors[$blocName])) {\n            $data = app(self::$interceptors[$blocName])->inject($blocName, $data);\n        }\n        if ($request->route()->getName() === 'preview') {\n            $data['isPreview'] = true;\n        }\n        return view(\"front.blocs.{$blocName}\", array_merge(['fields' => $data], $data))->render();\n    }\n    \n}\n"})})]})}function p(e={}){const{wrapper:a}={...(0,i.R)(),...e.components};return a?(0,t.jsx)(a,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}}}]);