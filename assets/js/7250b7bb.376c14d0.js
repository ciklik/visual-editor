"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[378],{4974:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"Preview/preview-server","title":"Server Side preview","description":"This is the default behaviour.","source":"@site/docs/Preview/preview-server.mdx","sourceDirName":"Preview","slug":"/Preview/preview-server","permalink":"/visual-editor/docs/Preview/preview-server","draft":false,"unlisted":false,"editUrl":"https://github.com/boxraiser/visual-editor/tree/main/docs/docs/Preview/preview-server.mdx","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Create templates","permalink":"/visual-editor/docs/templates"},"next":{"title":"Client Side preview","permalink":"/visual-editor/docs/Preview/preview-client"}}');var t=i(6106),s=i(8368);const a={sidebar_position:1},d="Server Side preview",l={},o=[{value:"Render the initial preview",id:"render-the-initial-preview",level:2},{value:"Render an update",id:"render-an-update",level:2}];function c(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"server-side-preview",children:"Server Side preview"})}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsx)(n.p,{children:"This is the default behaviour."})}),"\n",(0,t.jsxs)(n.p,{children:["When creating the editor you have to set up a ",(0,t.jsx)(n.code,{children:"preview"})," attribute with an endpoint that will be called using the POST method to render the initial preview and every block on change."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-html",children:'<visual-editor\n  name="content"\n  preview="http://my.server/preview"\n  iconsUrl="/[name].svg"\n></visual-editor>\n'})}),"\n",(0,t.jsx)(n.h2,{id:"render-the-initial-preview",children:"Render the initial preview"}),"\n",(0,t.jsx)(n.p,{children:"The first call will contain all the component data in a JSON array."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"curl 'https://preview/' \\\n  --data-raw $'[<BLOC_DATA>]' \\\n  --compressed\n"})}),"\n",(0,t.jsx)(n.p,{children:"The server must return an HTML document with these specifics requirements :"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:'An element with an id "ve-components" must be present'}),"\n",(0,t.jsxs)(n.li,{children:["A ",(0,t.jsx)(n.code,{children:"<div>"})," must be used to wrap every page component and must be direct children of ",(0,t.jsx)(n.code,{children:"#ve-components"})]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Here is an example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-html",children:'<!DOCTYPE>\n<html lang="en">\n<head>\n  <title>Title</title>\n  \x3c!-- --\x3e\n</head>\n<body>\n  <header>Header</header>\n  <div id="ve-components">\n    <div class="container">\n      First block\n    </div>\n    <div class="container py-5">\n      Second block\n    </div>\n    <div class="container py-2 bg-primary">\n      Third block\n    </div>\n  </div>\n</body>\n</html>\n'})}),"\n",(0,t.jsx)(n.h2,{id:"render-an-update",children:"Render an update"}),"\n",(0,t.jsx)(n.p,{children:'When updating a field the same endpoint will be called with the component data and an extra "preview" property set to true.'}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'curl \'https://visual-editor.droapp.com/\' \\\n  --data-raw $\'{"title":"Album example","_name":"hero","_id":"0","preview":true}\' \\\n  --compressed\n'})}),"\n",(0,t.jsx)(n.p,{children:"The server must return the HTML code of the component (without any extra HTML around)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-html",children:'<div class="container">\n  The new component\n</div>\n'})})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}}}]);